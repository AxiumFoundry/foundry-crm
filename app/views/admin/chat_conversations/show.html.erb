<section class="section-spacing-md bg-navy">
  <div class="container mx-auto max-w-4xl px-8 lg:px-16">
    <%= link_to admin_chat_conversations_path, class: "inline-flex items-center text-accent hover:text-primary-dark font-semibold text-sm uppercase tracking-wider mb-12 transition-base group" do %>
      <svg class="w-4 h-4 mr-2 group-hover:-translate-x-1 transition-base" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      All Conversations
    <% end %>

    <div class="mb-8">
      <h1 class="text-3xl font-bold text-white mb-4">Conversation Details</h1>
      <div class="flex items-center gap-3">
        <% if @conversation.status == "active" %>
          <span class="inline-block px-2 py-1 text-xs font-semibold rounded bg-green-500/20 text-green-400">Active</span>
        <% else %>
          <span class="inline-block px-2 py-1 text-xs font-semibold rounded bg-gray-500/20 text-gray-400">Inactive</span>
        <% end %>
        <% if @conversation.wants_human? %>
          <span class="inline-block px-2 py-1 text-xs font-semibold rounded bg-accent/20 text-accent">Human Requested</span>
        <% end %>
        <span class="text-gray-500 text-sm"><%= @conversation.created_at.strftime("%b %d, %Y %l:%M %p") %></span>
      </div>
    </div>
  </div>
</section>

<section class="section-spacing-md bg-dark-lighter">
  <div class="container mx-auto max-w-4xl px-8 lg:px-16">
    <div class="card-clean p-8">
      <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-6">Messages (<%= @messages.count %>)</h2>

      <div class="space-y-4">
        <% @messages.each do |message| %>
          <div class="flex <%= message.role == 'user' ? 'justify-end' : 'justify-start' %>">
            <div class="max-w-[75%]">
              <div class="<%= message.role == 'user' ? 'bg-accent/20 border border-accent/30' : 'bg-navy border border-gray-700' %> rounded-lg px-4 py-3">
                <div class="text-xs font-semibold uppercase tracking-wider mb-1 <%= message.role == 'user' ? 'text-accent' : 'text-gray-400' %>">
                  <%= message.role == "user" ? "Visitor" : "AI Assistant" %>
                </div>
                <div class="text-cream text-sm leading-relaxed"><%= simple_format(message.content) %></div>
              </div>
              <div class="text-xs text-gray-500 mt-1 <%= message.role == 'user' ? 'text-right' : '' %>">
                <%= message.created_at.strftime("%l:%M %p") %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</section>
